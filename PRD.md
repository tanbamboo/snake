# 贪吃蛇游戏 - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品背景
贪吃蛇是一款经典的休闲游戏，深受各年龄段玩家喜爱。本项目旨在创建一个现代化、响应式的网页版贪吃蛇游戏，为用户提供简单而有趣的游戏体验。

### 1.2 产品定位
一款轻量级、易于访问的休闲游戏，适合所有年龄段的用户在碎片化时间内娱乐放松。

### 1.3 目标用户
- 寻找简单休闲游戏的网络用户
- 怀旧游戏爱好者
- 各年龄段的休闲游戏玩家

## 2. 功能需求

### 2.1 核心游戏功能

#### 2.1.1 蛇的移动与控制
- **优先级**: P0
- **描述**: 玩家可以通过方向键或屏幕按钮控制蛇的移动方向（上、下、左、右）
- **验收标准**:
  - 蛇应按照玩家输入的方向平滑移动
  - 蛇不能直接180度转向（例如，向右移动时不能直接向左转）
  - 移动速度应适中，确保游戏既有挑战性又不会过于困难

#### 2.1.2 食物系统
- **优先级**: P0
- **描述**: 游戏区域内随机生成食物，蛇吃到食物后会变长并增加分数
- **验收标准**:
  - 食物应随机出现在游戏区域内的空白位置
  - 食物不应生成在蛇身上
  - 蛇吃到食物后，身体长度增加一个单位
  - 每吃一个食物，分数增加10分

#### 2.1.3 碰撞检测
- **优先级**: P0
- **描述**: 检测蛇是否撞到墙壁或自己的身体
- **验收标准**:
  - 蛇撞到墙壁时游戏结束
  - 蛇撞到自己的身体时游戏结束（从第4个身体部分开始检测）
  - 碰撞发生时，应立即停止游戏并显示游戏结束界面

#### 2.1.4 分数系统
- **优先级**: P1
- **描述**: 记录当前游戏分数和历史最高分
- **验收标准**:
  - 实时显示当前游戏分数
  - 显示历史最高分
  - 当前分数超过历史最高分时，更新最高分记录
  - 最高分应使用localStorage保存，在浏览器关闭后仍能保留

#### 2.1.5 游戏状态管理
- **优先级**: P1
- **描述**: 管理游戏的不同状态（未开始、进行中、暂停、结束）
- **验收标准**:
  - 游戏初始状态为"未开始"
  - 可通过开始按钮、回车键或方向键开始游戏
  - 游戏进行中可通过暂停按钮或空格键暂停/继续
  - 游戏结束时显示结束界面，包含最终分数和重新开始选项

### 2.2 用户界面需求

#### 2.2.1 游戏画布
- **优先级**: P0
- **描述**: 使用HTML5 Canvas创建游戏主画面
- **验收标准**:
  - 画布大小应根据设备屏幕尺寸自适应调整
  - 画布应有清晰的边界和网格背景
  - 游戏元素（蛇和食物）应清晰可见

#### 2.2.2 蛇的视觉效果
- **优先级**: P2
- **描述**: 为蛇添加视觉效果，提升游戏体验
- **验收标准**:
  - 蛇头与身体使用不同颜色区分
  - 蛇身使用渐变色效果
  - 蛇头应有眼睛，并根据移动方向改变位置
  - 蛇的每个部分应有边框，增强视觉效果

#### 2.2.3 控制界面
- **优先级**: P1
- **描述**: 提供游戏控制按钮和信息显示
- **验收标准**:
  - 显示开始、暂停/继续、重新开始按钮
  - 显示当前分数和最高分
  - 在移动设备上显示方向控制按钮
  - 游戏结束时显示最终分数和重新开始选项

#### 2.2.4 响应式设计
- **优先级**: P1
- **描述**: 确保游戏在不同设备上都有良好的体验
- **验收标准**:
  - 在桌面设备上使用键盘控制
  - 在移动设备上显示触屏控制按钮
  - 游戏界面应根据屏幕尺寸自动调整
  - 在小屏幕设备上，游戏画布和控制元素应适当缩小

### 2.3 技术需求

#### 2.3.1 浏览器兼容性
- **优先级**: P1
- **描述**: 确保游戏在主流现代浏览器中正常运行
- **验收标准**:
  - 支持Chrome、Firefox、Safari、Edge等现代浏览器
  - 在移动设备浏览器上正常运行
  - 不需要支持IE11及以下版本

#### 2.3.2 性能优化
- **优先级**: P2
- **描述**: 确保游戏运行流畅，无明显卡顿
- **验收标准**:
  - 游戏帧率应保持稳定
  - 动画过渡应平滑
  - 在低配置设备上也能保持可接受的性能

## 3. 非功能需求

### 3.1 可用性
- 游戏操作应简单直观，新用户无需教程即可上手
- 游戏界面应清晰，视觉反馈明确
- 控制按钮应足够大，便于触屏操作

### 3.2 可访问性
- 游戏应支持键盘和触屏两种操作方式
- 游戏颜色对比度应适中，确保视觉清晰
- 游戏速度应适中，不会过快导致操作困难

### 3.3 可维护性
- 代码结构应清晰，便于后续维护和功能扩展
- 关键功能应有注释说明
- 变量和函数命名应遵循一致的规范

## 4. 未来扩展功能（可选）

### 4.1 难度级别
- 添加不同难度级别（简单、中等、困难），影响蛇的移动速度和食物生成频率

### 4.2 特殊食物
- 添加特殊食物，如提供额外分数或临时能力（如穿墙、减速等）
  - **已实现**：添加了5种特殊食物类型
    - 金苹果：双倍分数（+20分）
    - 星星：临时加速（10秒内蛇移动速度提升30%）
    - 幽灵：临时穿墙能力（8秒内可以穿过墙壁，从另一侧出现）
    - 钻石：三倍分数（+30分）
    - 减速器：临时减速（12秒内蛇移动速度降低20%）
  - 特殊食物有一定概率替代普通食物出现
  - 特殊食物会在10秒后消失，然后重新生成新的食物
  - 特殊效果有持续时间，结束后恢复正常状态

### 4.3 多人模式
- 添加本地双人对战模式，两名玩家在同一屏幕上控制不同的蛇

### 4.4 主题切换
- 提供多种视觉主题（如经典、暗黑、彩虹等）供玩家选择

### 4.5 排行榜系统
- 添加在线排行榜，记录全球玩家的最高分

## 5. 技术栈

- **前端**: HTML5, CSS3, JavaScript
- **存储**: localStorage (客户端存储)
- **图形渲染**: Canvas API

## 6. 项目时间线

| 阶段 | 时间估计 | 主要任务 |
|------|----------|---------|
| 规划与设计 | 1周 | 确定游戏规则、界面设计、技术选型 |
| 核心功能开发 | 2周 | 实现蛇的移动、食物系统、碰撞检测等核心功能 |
| UI开发 | 1周 | 实现游戏界面、响应式设计、视觉效果 |
| 测试与优化 | 1周 | 功能测试、性能优化、跨浏览器兼容性测试 |
| 发布 | 0.5周 | 部署到服务器，发布上线 |

## 7. 验收标准

- 游戏在主流浏览器中运行流畅，无明显bug
- 所有P0和P1级别功能正常工作
- 响应式设计在不同设备上表现良好
- 游戏操作流畅，控制灵敏
- 分数系统正确记录和显示